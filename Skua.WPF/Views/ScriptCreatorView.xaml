<UserControl
    x:Class="Skua.WPF.Views.ScriptCreatorView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Skua.WPF.Views"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vms="clr-namespace:Skua.Core.ViewModels.Manager;assembly=Skua.Core"
    d:DataContext="{d:DesignInstance vms:ScriptCreatorViewModel}"
    d:DesignHeight="800"
    d:DesignWidth="800"
    mc:Ignorable="d">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="240" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- Left Panel: Settings -->
        <Grid Grid.Column="0" Margin="0,20,20,20">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                    </Grid.RowDefinitions>

            <TextBlock
                Grid.Row="0"
                Text="Script Creator [WIP]"
                FontSize="16"
                FontWeight="Bold"
                Margin="0,0,0,16" />

            <!-- Script Name -->
            <TextBlock
                Grid.Row="1"
                Text="Script Name"
                Margin="0,0,0,4" />
            <TextBox
                Grid.Row="2"
                Text="{Binding ScriptName, UpdateSourceTrigger=PropertyChanged}"
                Margin="0,0,0,12"
                Padding="8" />

            <!-- Script Description -->
            <TextBlock
                Grid.Row="3"
                Text="Description"
                Margin="0,0,0,4" />
            <TextBox
                Grid.Row="4"
                Text="{Binding ScriptDescription, UpdateSourceTrigger=PropertyChanged}"
                TextWrapping="Wrap"
                Height="60"
                Margin="0,0,0,12"
                VerticalAlignment="Top"
                AcceptsReturn="True"
                Padding="8" />

            <!-- Include Options -->
            <TextBlock
                Grid.Row="5"
                Text="Include Libraries"
                Margin="0,12,0,8" />

            <CheckBox
                Grid.Row="6"
                IsChecked="{Binding UseCoreBots, UpdateSourceTrigger=PropertyChanged}"
                Content="CoreBots"
                Margin="8,0,0,4" />

            <CheckBox
                Grid.Row="7"
                IsChecked="{Binding UseCoreStory, UpdateSourceTrigger=PropertyChanged}"
                Content="CoreStory"
                Margin="8,0,0,4" />

            <CheckBox
                Grid.Row="8"
                IsChecked="{Binding UseCoreAdvanced, UpdateSourceTrigger=PropertyChanged}"
                Content="CoreAdvanced"
                Margin="8,0,0,4" />

            <StackPanel Grid.Row="9" Orientation="Vertical" VerticalAlignment="Bottom" Margin="0,12,0,0">
                <CheckBox
                    IsChecked="{Binding UseCoreFarms, UpdateSourceTrigger=PropertyChanged}"
                    Content="CoreFarms"
                    Margin="8,0,0,4" />

                <CheckBox
                    IsChecked="{Binding UseCoreDailies, UpdateSourceTrigger=PropertyChanged}"
                    Content="CoreDailies"
                    Margin="8,0,0,4" />

                <TextBlock
                    Text="Helper Methods"
                    Margin="0,12,0,8"
                    FontWeight="Bold" />

                <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                    <TextBlock Text="Hunt:" Width="50" />
                    <Button Content="+" Command="{Binding AddHuntMethodCommand}" Padding="4" />
                </StackPanel>
                <ItemsControl ItemsSource="{Binding HuntMethods}" Margin="8,0,0,8">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Expander Background="#2a2a2a" Margin="0,2">
                                <Expander.Header>
                                    <Grid HorizontalAlignment="Stretch">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="{Binding}" Foreground="White" />
                                        <Button Grid.Column="1" Content="-" Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=DataContext.RemoveHuntMethodCommand}" CommandParameter="{Binding}" Padding="4" Margin="8,0,0,0" />
                                    </Grid>
                                </Expander.Header>
                                <StackPanel Margin="8" Orientation="Vertical">
                                    <TextBlock Text="Map Name" Margin="0,0,0,2" Foreground="White" />
                                    <TextBox Text="{Binding MapName, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8" />
                                    <TextBlock Text="Monster Name" Margin="0,0,0,2" Foreground="White" />
                                    <TextBox Text="{Binding MonsterName, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8" />
                                    <TextBlock Text="Item Name" Margin="0,0,0,2" Foreground="White" />
                                    <TextBox Text="{Binding ItemName, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8" />
                                    <TextBlock Text="Quantity" Margin="0,0,0,2" Foreground="White" />
                                    <TextBox Text="{Binding Quantity, UpdateSourceTrigger=PropertyChanged}" />
                                </StackPanel>
                            </Expander>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                    <TextBlock Text="Kill:" Width="50" />
                    <Button Content="+" Command="{Binding AddKillMethodCommand}" Padding="4" />
                </StackPanel>
                <ItemsControl ItemsSource="{Binding KillMethods}" Margin="8,0,0,8">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Expander Background="#2a2a2a" Margin="0,2">
                                <Expander.Header>
                                    <Grid HorizontalAlignment="Stretch">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="{Binding}" Foreground="White" />
                                        <Button Grid.Column="1" Content="-" Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=DataContext.RemoveKillMethodCommand}" CommandParameter="{Binding}" Padding="4" Margin="8,0,0,0" />
                                    </Grid>
                                </Expander.Header>
                                <StackPanel Margin="8" Orientation="Vertical">
                                    <TextBlock Text="Map Name" Margin="0,0,0,2" Foreground="White" />
                                    <TextBox Text="{Binding MapName, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8" />
                                    <TextBlock Text="Monster Name" Margin="0,0,0,2" Foreground="White" />
                                    <TextBox Text="{Binding MonsterName, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8" />
                                    <TextBlock Text="Quantity" Margin="0,0,0,2" Foreground="White" />
                                    <TextBox Text="{Binding Quantity, UpdateSourceTrigger=PropertyChanged}" />
                                </StackPanel>
                            </Expander>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                    <TextBlock Text="Quest:" Width="50" />
                    <Button Content="+" Command="{Binding AddQuestMethodCommand}" Padding="4" />
                </StackPanel>
                <ItemsControl ItemsSource="{Binding QuestMethods}" Margin="8,0,0,8">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Expander Background="#2a2a2a" Margin="0,2">
                                <Expander.Header>
                                    <Grid HorizontalAlignment="Stretch">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="{Binding}" Foreground="White" />
                                        <Button Grid.Column="1" Content="-" Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=DataContext.RemoveQuestMethodCommand}" CommandParameter="{Binding}" Padding="4" Margin="8,0,0,0" />
                                    </Grid>
                                </Expander.Header>
                                <StackPanel Margin="8" Orientation="Vertical">
                                    <TextBlock Text="Quest ID" Margin="0,0,0,2" Foreground="White" />
                                    <TextBox Text="{Binding QuestId, UpdateSourceTrigger=PropertyChanged}" />
                                </StackPanel>
                            </Expander>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                    <TextBlock Text="Story:" Width="50" />
                    <Button Content="+" Command="{Binding AddStoryMethodCommand}" Padding="4" />
                </StackPanel>
                <ItemsControl ItemsSource="{Binding StoryMethods}" Margin="8,0,0,8">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Expander Background="#2a2a2a" Margin="0,2">
                                <Expander.Header>
                                    <Grid HorizontalAlignment="Stretch">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="{Binding}" Foreground="White" />
                                        <Button Grid.Column="1" Content="-" Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=DataContext.RemoveStoryMethodCommand}" CommandParameter="{Binding}" Padding="4" Margin="8,0,0,0" />
                                    </Grid>
                                </Expander.Header>
                                <StackPanel Margin="8" Orientation="Vertical">
                                    <TextBlock Text="Quest ID" Margin="0,0,0,2" Foreground="White" />
                                    <TextBox Text="{Binding QuestId, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8" />
                                    <TextBlock Text="Method Type" Margin="0,0,0,2" Foreground="White" />
                                    <TextBox Text="{Binding MethodType, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8" />
                                    <TextBlock Text="Map Name" Margin="0,0,0,2" Foreground="White" />
                                    <TextBox Text="{Binding MapName, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8" />
                                    <TextBlock Text="Monster Name" Margin="0,0,0,2" Foreground="White" />
                                    <TextBox Text="{Binding MonsterName, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8" />
                                    <TextBlock Text="Item IDs (comma-separated)" Margin="0,0,0,2" Foreground="White" />
                                    <TextBox Text="{Binding ItemIds, UpdateSourceTrigger=PropertyChanged}" />
                                </StackPanel>
                            </Expander>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>

            <!-- Buttons -->
            <StackPanel Grid.Row="10" Orientation="Vertical">
                <Button
                    Command="{Binding GenerateScriptCommand}"
                    Content="Generate Script"
                    Margin="0,0,0,4"
                    Padding="4" />
                <Button
                    Command="{Binding SaveScriptCommand}"
                    Content="Save Script"
                    Margin="0,0,0,4"
                    Padding="4" />
                <Button
                    Click="CopyButton_Click"
                    Content="Copy to Clipboard"
                    Padding="4" />
            </StackPanel>
                </Grid>
            </ScrollViewer>
        </Grid>

        <!-- Right Panel: Generated Code Preview -->
        <Grid Grid.Column="1" Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>

            <TextBlock
                Grid.Row="0"
                Text="Generated Script"
                FontSize="16"
                FontWeight="Bold"
                Margin="0,0,0,12" />

            <TextBox
                Grid.Row="1"
                Text="{Binding GeneratedCode, UpdateSourceTrigger=PropertyChanged}"
                TextWrapping="Wrap"
                VerticalScrollBarVisibility="Auto"
                HorizontalScrollBarVisibility="Auto"
                FontFamily="Consolas"
                FontSize="11"
                Padding="12"
                IsReadOnly="True" />

            <!-- Status Message -->
            <TextBlock
                Grid.Row="2"
                Text="{Binding StatusMessage, UpdateSourceTrigger=PropertyChanged}"
                Margin="0,12,0,0"
                TextWrapping="Wrap" />
        </Grid>
    </Grid>
</UserControl>
